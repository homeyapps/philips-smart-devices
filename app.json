{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "com.philips.smart-devices",
  "version": "1.1.0",
  "compatibility": ">=12.2.0",
  "platforms": [
    "local"
  ],
  "sdk": 3,
  "brandColor": "#0074E0",
  "name": {
    "en": "Philips Smart Devices"
  },
  "description": {
    "en": "Add your Philips smart devices to the Homey ecosystem"
  },
  "category": "lights",
  "tags": {
    "en": [
      "philips",
      "somneo",
      "smartsleep"
    ]
  },
  "images": {
    "small": "/assets/images/small.png",
    "large": "/assets/images/large.png",
    "xlarge": "/assets/images/xlarge.png"
  },
  "permissions": [],
  "author": {
    "name": "Vladyslav Zahorodnii"
  },
  "contributing": {
    "donate": {
      "paypal": {
        "username": "my_paypal_username"
      }
    }
  },
  "bugs": {
    "url": "https://github.com/homeyapps/philips-smart-devices/issues"
  },
  "homeyCommunityTopicId": 122893,
  "source": "https://github.com/homeyapps/philips-smart-devices",
  "flow": {
    "triggers": [
      {
        "id": "onoff.mainlight_true",
        "title": {
          "en": "Main light is on"
        },
        "hint": {
          "en": "The status of the main light from device is updated every 4 seconds."
        },
        "tokens": [
          {
            "name": "onoff.mainlight",
            "type": "boolean",
            "title": {
              "en": "main-light"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.mainlight_false",
        "title": {
          "en": "Main light is off"
        },
        "hint": {
          "en": "The status of the main light from device is updated every 4 seconds."
        },
        "tokens": [
          {
            "name": "onoff.mainlight",
            "type": "boolean",
            "title": {
              "en": "main-light"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.nightlight_true",
        "title": {
          "en": "Night light is on"
        },
        "hint": {
          "en": "The status of the night light from device is updated every 4 seconds."
        },
        "tokens": [
          {
            "name": "onoff.nightlight",
            "type": "boolean",
            "title": {
              "en": "night-light"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.nightlight_false",
        "title": {
          "en": "Night light is off"
        },
        "hint": {
          "en": "The status of the night light from device is updated every 4 seconds."
        },
        "tokens": [
          {
            "name": "onoff.nightlight",
            "type": "boolean",
            "title": {
              "en": "night-light"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.sunset_true",
        "title": {
          "en": "Sunset is on"
        },
        "hint": {
          "en": "The status of the sunset from device is updated every 4 seconds."
        },
        "tokens": [
          {
            "name": "onoff.sunset",
            "type": "boolean",
            "title": {
              "en": "sunset"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.sunset_false",
        "title": {
          "en": "Sunset is off"
        },
        "hint": {
          "en": "The status of the sunset from device is updated every 4 seconds."
        },
        "tokens": [
          {
            "name": "onoff.sunset",
            "type": "boolean",
            "title": {
              "en": "sunset"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.relax_breathe_true",
        "title": {
          "en": "Relax breathe is on"
        },
        "hint": {
          "en": "The status of the relax breathe from device is updated every 4 seconds."
        },
        "tokens": [
          {
            "name": "onoff.relax_breathe",
            "type": "boolean",
            "title": {
              "en": "relax-breathe"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.relax_breathe_false",
        "title": {
          "en": "Relax breathe is off"
        },
        "hint": {
          "en": "The status of the relax breathe from device is updated every 4 seconds."
        },
        "tokens": [
          {
            "name": "onoff.relax_breathe",
            "type": "boolean",
            "title": {
              "en": "relax-breathe"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.bedtime_tracking_true",
        "title": {
          "en": "Bedtime tracking is on"
        },
        "hint": {
          "en": "The status of the bedtime tracking from device is updated every 4 seconds."
        },
        "tokens": [
          {
            "name": "onoff.bedtime_tracking",
            "type": "boolean",
            "title": {
              "en": "bedtime-tracking"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.bedtime_tracking_false",
        "title": {
          "en": "Bedtime tracking is off"
        },
        "hint": {
          "en": "The status of the bedtime tracking from device is updated every 4 seconds."
        },
        "tokens": [
          {
            "name": "onoff.bedtime_tracking",
            "type": "boolean",
            "title": {
              "en": "bedtime-tracking"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "onoff.mainlight_enabled",
        "title": {
          "en": "Main light is !{{on|off}}"
        },
        "hint": {
          "en": "The status of the main light from device is updated every 4 seconds."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.nightlight_enabled",
        "title": {
          "en": "Night light is !{{on|off}}"
        },
        "hint": {
          "en": "The status of the night light from device is updated every 4 seconds."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.sunset_enabled",
        "title": {
          "en": "Sunset is !{{on|off}}"
        },
        "hint": {
          "en": "The status of the sunset from device is updated every 4 seconds."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.relax_breathe_enabled",
        "title": {
          "en": "Relax breathe is !{{on|off}}"
        },
        "hint": {
          "en": "The status of the relax breathe from device is updated every 4 seconds."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      },
      {
        "id": "onoff.bedtime_tracking_enabled",
        "title": {
          "en": "Bedtime tracking is !{{on|off}}"
        },
        "hint": {
          "en": "The status of the bedtime tracking from device is updated every 4 seconds."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "onoff.mainlight_activate",
        "title": {
          "en": "... the main light"
        },
        "titleFormatted": {
          "en": "[[state]] the main light"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          },
          {
            "name": "state",
            "type": "dropdown",
            "values": [
              {
                "id": "true",
                "label": {
                  "en": "Activate"
                }
              },
              {
                "id": "false",
                "label": {
                  "en": "Deactivate"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "onoff.nightlight_activate",
        "title": {
          "en": "... the night light"
        },
        "titleFormatted": {
          "en": "[[state]] the night light"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          },
          {
            "name": "state",
            "type": "dropdown",
            "values": [
              {
                "id": "true",
                "label": {
                  "en": "Activate"
                }
              },
              {
                "id": "false",
                "label": {
                  "en": "Deactivate"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "onoff.sunset_activate",
        "title": {
          "en": "... the sunset"
        },
        "titleFormatted": {
          "en": "[[state]] the sunset"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          },
          {
            "name": "state",
            "type": "dropdown",
            "values": [
              {
                "id": "true",
                "label": {
                  "en": "Activate"
                }
              },
              {
                "id": "false",
                "label": {
                  "en": "Deactivate"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "onoff.relax_breathe_activate",
        "title": {
          "en": "... the relax breathe"
        },
        "titleFormatted": {
          "en": "[[state]] the relax breathe"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          },
          {
            "name": "state",
            "type": "dropdown",
            "values": [
              {
                "id": "true",
                "label": {
                  "en": "Activate"
                }
              },
              {
                "id": "false",
                "label": {
                  "en": "Deactivate"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "onoff.bedtime_tracking_activate",
        "title": {
          "en": "... the bedtime tracking"
        },
        "titleFormatted": {
          "en": "[[state]] the bedtime tracking"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=somneo"
          },
          {
            "name": "state",
            "type": "dropdown",
            "values": [
              {
                "id": "true",
                "label": {
                  "en": "Activate"
                }
              },
              {
                "id": "false",
                "label": {
                  "en": "Deactivate"
                }
              }
            ]
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "name": {
        "en": "Somneo Sleep & Wake-up Light"
      },
      "class": "socket",
      "capabilities": [
        "measure_temperature",
        "measure_humidity",
        "measure_luminance",
        "measure_noise",
        "onoff.mainlight",
        "onoff.nightlight",
        "onoff.sunset",
        "onoff.relax_breathe",
        "onoff.bedtime_tracking",
        "dim",
        "button.restart"
      ],
      "capabilitiesOptions": {
        "onoff.mainlight": {
          "title": {
            "en": "Main Light"
          }
        },
        "onoff.nightlight": {
          "title": {
            "en": "Night Light"
          }
        },
        "onoff.sunset": {
          "title": {
            "en": "Sunset"
          }
        },
        "onoff.relax_breathe": {
          "title": {
            "en": "Relax Breathe"
          }
        },
        "onoff.bedtime_tracking": {
          "title": {
            "en": "Bedtime Tracking"
          }
        },
        "dim": {
          "min": 1,
          "max": 25,
          "step": 1,
          "units": {
            "en": ""
          }
        },
        "button.restart": {
          "maintenanceAction": true,
          "title": {
            "en": "Restart device"
          },
          "desc": {
            "en": "If the device controller is not responding, restart the device may resolve the issue. After this action, please restart the application for best results."
          }
        }
      },
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "discovery": "somneo-devices",
      "images": {
        "small": "/drivers/somneo/assets/images/small.png",
        "large": "/drivers/somneo/assets/images/large.png",
        "xlarge": "/drivers/somneo/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_somneo_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_somneo_devices"
          }
        },
        {
          "id": "add_somneo_devices",
          "template": "add_devices"
        }
      ],
      "id": "somneo",
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "Device"
          },
          "children": [
            {
              "id": "display_always_on",
              "type": "checkbox",
              "value": true,
              "label": {
                "en": "Display Always On"
              },
              "hint": {
                "en": "When deactivated, the display will automatically turn off after a certain amount of time."
              }
            },
            {
              "id": "display_brightness",
              "type": "number",
              "label": {
                "en": "Display Brightness"
              },
              "value": 3,
              "min": 1,
              "max": 6,
              "step": 1
            },
            {
              "id": "sensors_polling_frequency",
              "type": "number",
              "label": {
                "en": "Sensors Polling Frequency"
              },
              "value": 60,
              "min": 1,
              "max": 86400,
              "step": 10,
              "units": {
                "en": "sec"
              },
              "hint": {
                "en": "This setting adjusts the frequency of the sensors polling."
              }
            },
            {
              "id": "alarms_polling_frequency",
              "type": "number",
              "label": {
                "en": "Alarms Polling Frequency"
              },
              "value": 30,
              "min": 1,
              "max": 1440,
              "step": 1,
              "units": {
                "en": "min"
              },
              "hint": {
                "en": "This setting adjusts the frequency of the alarms polling."
              }
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Sunrise"
          },
          "children": [
            {
              "id": "sunrise_preview",
              "type": "checkbox",
              "value": false,
              "label": {
                "en": "Enable sunrise preview mode"
              },
              "hint": {
                "en": "Activates the preview mode for sunrise and how it will look in alarm. Remember to turn this mode off when you finish testing."
              }
            },
            {
              "id": "sunrise_color_scheme",
              "type": "dropdown",
              "value": "0",
              "label": {
                "en": "Color Scheme"
              },
              "hint": {
                "en": "Choose a color scheme to create your own personal sunrise."
              },
              "values": [
                {
                  "id": "0",
                  "label": {
                    "en": "Sunny Day"
                  }
                },
                {
                  "id": "1",
                  "label": {
                    "en": "Island Red"
                  }
                },
                {
                  "id": "2",
                  "label": {
                    "en": "Nordic White"
                  }
                },
                {
                  "id": "3",
                  "label": {
                    "en": "Caribbean Red"
                  }
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Sunset"
          },
          "children": [
            {
              "id": "sunset_duration",
              "type": "number",
              "label": {
                "en": "Duration"
              },
              "value": 30,
              "min": 5,
              "max": 60,
              "step": 5,
              "units": {
                "en": "min"
              }
            },
            {
              "id": "sunset_light_intensity",
              "type": "number",
              "label": {
                "en": "Light Intensity"
              },
              "value": 20,
              "min": 0,
              "max": 25,
              "step": 1
            },
            {
              "id": "sunset_color_scheme",
              "type": "dropdown",
              "value": "0",
              "label": {
                "en": "Color Scheme"
              },
              "hint": {
                "en": "Choose a color scheme to create your own personal sunset."
              },
              "values": [
                {
                  "id": "0",
                  "label": {
                    "en": "Sunny Day"
                  }
                },
                {
                  "id": "1",
                  "label": {
                    "en": "Island Red"
                  }
                },
                {
                  "id": "2",
                  "label": {
                    "en": "Nordic White"
                  }
                },
                {
                  "id": "3",
                  "label": {
                    "en": "Caribbean Red"
                  }
                }
              ]
            },
            {
              "id": "sunset_ambient_sound",
              "type": "dropdown",
              "value": "1",
              "label": {
                "en": "Ambient Sounds"
              },
              "values": [
                {
                  "id": "off",
                  "label": {
                    "en": "No Sound"
                  }
                },
                {
                  "id": "fmr",
                  "label": {
                    "en": "FM Radio"
                  }
                },
                {
                  "id": "aux",
                  "label": {
                    "en": "AUX Source"
                  }
                },
                {
                  "id": "1",
                  "label": {
                    "en": "Soft Rain"
                  }
                },
                {
                  "id": "2",
                  "label": {
                    "en": "Ocean Waves"
                  }
                },
                {
                  "id": "3",
                  "label": {
                    "en": "Under Water"
                  }
                },
                {
                  "id": "4",
                  "label": {
                    "en": "Summer Lake"
                  }
                }
              ]
            },
            {
              "id": "sunset_ambient_radio_channel",
              "type": "dropdown",
              "value": "1",
              "label": {
                "en": "Radio Channel"
              },
              "hint": {
                "en": "The setting is applied only when ambient sound is selected as 'FM Radio'."
              },
              "values": [
                {
                  "id": "1",
                  "label": {
                    "en": "Channel 1"
                  }
                },
                {
                  "id": "2",
                  "label": {
                    "en": "Channel 2"
                  }
                },
                {
                  "id": "3",
                  "label": {
                    "en": "Channel 3"
                  }
                },
                {
                  "id": "4",
                  "label": {
                    "en": "Channel 4"
                  }
                },
                {
                  "id": "5",
                  "label": {
                    "en": "Channel 5"
                  }
                }
              ]
            },
            {
              "id": "sunset_ambient_volume",
              "type": "number",
              "label": {
                "en": "Ambient Sound Volume"
              },
              "value": 12,
              "min": 1,
              "max": 25,
              "step": 1
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Relax Breathe"
          },
          "hint": {
            "en": "Light-guided wind-down function is designed to help you sleep by decompressing from the day's activities \nFollow one of seven rhythms of light or sound with your breathing as instructed in the video. \nRecommend to start with a rhythm of 6-8 breaths per minute. \nn the unlikely case of feeling unwell while performing RelaxBreathe please stop RelaxBreathe immediately."
          },
          "children": [
            {
              "id": "relax_breathing_pace",
              "type": "number",
              "label": {
                "en": "Breathing Pace"
              },
              "value": 4,
              "min": 4,
              "max": 10,
              "step": 1,
              "units": {
                "en": "bpm"
              }
            },
            {
              "id": "relax_duration",
              "type": "number",
              "label": {
                "en": "Duration"
              },
              "value": 10,
              "min": 5,
              "max": 15,
              "step": 5,
              "units": {
                "en": "min"
              }
            },
            {
              "id": "relax_guidance_type",
              "type": "dropdown",
              "value": "0",
              "label": {
                "en": "Guidance Type"
              },
              "values": [
                {
                  "id": "0",
                  "label": {
                    "en": "Light"
                  }
                },
                {
                  "id": "1",
                  "label": {
                    "en": "Sound"
                  }
                }
              ]
            },
            {
              "id": "relax_light_intensity",
              "type": "number",
              "label": {
                "en": "Light Intensity"
              },
              "value": 20,
              "min": 1,
              "max": 25,
              "step": 1
            },
            {
              "id": "relax_sound_intensity",
              "type": "number",
              "label": {
                "en": "Sound Intensity"
              },
              "value": 12,
              "min": 1,
              "max": 25,
              "step": 1
            }
          ]
        }
      ]
    }
  ],
  "discovery": {
    "somneo-devices": {
      "type": "mdns-sd",
      "mdns-sd": {
        "name": "philipscondor",
        "protocol": "tcp"
      },
      "id": "{{txt.id}}",
      "conditions": [
        [
          {
            "field": "txt.fn",
            "match": {
              "type": "string",
              "value": "Philips SmartAlarm"
            }
          }
        ]
      ]
    }
  }
}